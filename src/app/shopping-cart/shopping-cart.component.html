<div class="container-fluid px-5 py-4">
  <div class="row">
    <div class="col-12">
      <div class="cart-header mb-4">
        <h2 class="cart-title">
          <i class="bi bi-cart3 me-2"></i>
          Mi Carrito de Compras
        </h2>
        <p class="cart-subtitle text-muted">Revisa los productos que has agregado a tu carrito</p>
      </div>

      <!-- Empty cart message -->
      <div *ngIf="products.length === 0" class="empty-cart-container">
        <div class="empty-cart-card">
          <i class="bi bi-cart-x empty-cart-icon"></i>
          <h3 class="empty-cart-title">Tu carrito está vacío</h3>
          <p class="empty-cart-subtitle">¡Agrega algunos productos increíbles para comenzar!</p>
          <a routerLink="/products/palette" class="btn btn-shop-now">
            <i class="bi bi-arrow-left me-2"></i>
            Continuar Comprando
          </a>
        </div>
      </div>

      <!-- Cart items -->
      <div *ngIf="products.length > 0" class="cart-content">
        <div class="row">
          <!-- Cart items list -->
          <div class="col-lg-8 mb-4">
            <div class="cart-items-container">
              <div *ngFor="let product of products" class="cart-item-card">
                <div class="row align-items-center">
                  <!-- Product image -->
                  <div class="col-3 col-md-2">
                    <div class="product-image-container">
                      <img [src]="product.image" [alt]="product.name" class="product-image">
                    </div>
                  </div>

                  <!-- Product details -->
                  <div class="col-6 col-md-6">
                    <div class="product-details">
                      <h5 class="product-name">{{ product.name }}</h5>
                      <p class="product-brand text-muted">{{ product.brand }}</p>
                      <p class="product-description">{{ product.description }}</p>
                    </div>
                  </div>

                  <!-- Quantity and price -->
                  <div class="col-3 col-md-4">
                    <div class="product-controls">                      
                      <div class="quantity-controls mb-2">
                        <button class="btn btn-quantity" [disabled]="product.quantity <= 1" (click)="decrementQuantity(product)">
                          <i class="bi bi-dash"></i>
                        </button>
                        <span class="quantity-display">{{ product.quantity }}</span>
                        <button class="btn btn-quantity" (click)="incrementQuantity(product)">
                          <i class="bi bi-plus"></i>
                        </button>
                      </div>
                      <div class="price-info">
                        <p class="unit-price text-muted mb-1">${{ product.price }} c/u</p>
                        <p class="total-price">${{ totalPrice(product) }}</p>
                      </div>                  
                      <button class="btn btn-remove" title="Eliminar producto" (click)="removeProduct(product)">
                        <i class="bi bi-trash3"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Cart summary -->
          <div class="col-lg-4">
            <div class="cart-summary-card">
              <h4 class="summary-title">Resumen de Compra</h4>
              
              <div class="summary-details">
                <div class="summary-row">
                  <span>Productos ({{ products.length }})</span>
                  <span>${{ total() }}</span>
                </div>
                <div class="summary-row">
                  <span>Envío</span>
                  <span class="free-shipping">Gratis</span>
                </div>
                <hr class="summary-divider">
                <div class="summary-row total-row">
                  <span>Total</span>
                  <span class="total-amount">${{ total() }}</span>
                </div>
              </div>

              <div class="checkout-actions">
                <button class="btn btn-checkout w-100 mb-2">
                  <i class="bi bi-credit-card me-2"></i>
                  Proceder al Pago
                </button>
                <a routerLink="/products/palette" class="btn btn-continue-shopping w-100">
                  <i class="bi bi-arrow-left me-2"></i>
                  Continuar Comprando
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
